<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<style>
body{font:13px sans-serif;width:320px;padding:8px}
#summary{background:#fafafa;border-radius:6px;padding:6px;margin-bottom:8px}
table{width:100%;border-collapse:collapse;margin-bottom:8px}
td{border-bottom:1px solid #ddd;padding:2px 4px}
pre{font-size:11px;white-space:pre-wrap}
</style>
</head>
<body>
<h3>Whatnot Sniffer</h3>

<section id="info">
  <h4 id="streamTitle">…</h4>
  <div id="hostName">Host: —</div>
</section>
<section id="stats">
  <canvas id="viewersSparkline" width="300" height="50"></canvas>
  <div id="viewerCount">Viewers: 0</div>
  <div id="bidVelocity">Bids/sec: 0</div>
  <div id="avgBid">Avg bid: $0.00</div>
  <div id="rpm">RPM: $0.00</div>
</section>

<!-- URL entry & Start -->
<input id="auctionUrl" type="text" placeholder="Auction URL (leave blank to track current tab)" />
<button id="startBtn">Start / Track</button>
<div id="status"></div>

<!-- Summary -->
<section id="summary"></section>

<!-- Live lists -->
<h4>Items</h4>
<table>
  <thead><tr><th>Item</th><th>Hits</th></tr></thead>
  <tbody id="tblItems">
    <tr><td colspan="2">No items yet…</td></tr>
  </tbody>
</table>

<section id="breakStats">
  <h4>Lot Progress</h4>
  <table id="tblBreaks"><tbody></tbody></table>
</section>

<!-- Sales -->
<h4>Sales</h4>
<table>
  <thead><tr><th>Item</th><th>Buyer</th><th>Price</th></tr></thead>
  <tbody id="tblSales">
    <tr><td colspan="3">No sales yet…</td></tr>
  </tbody>
</table>
<div id="avgPrice" style="margin:4px 0;font-size:12px;">
  Average Sale Price: $0.00
</div>
<div id="remaining" style="margin:4px 0;font-size:12px;">
  Items Remaining: 0
</div>

<!-- Bids -->
<h4>Bids</h4>
<table>
  <thead><tr><th>Amount</th><th>Bidder</th></tr></thead>
<tbody id="tblBids">
    <tr><td colspan="2">No bids yet…</td></tr>
  </tbody>
</table>

<section id="reactions">
  <h4>Reactions</h4>
  <div id="reactionGauge"></div>
</section>

<section id="giveaways">
  <h4>Giveaways</h4>
  <div id="giveawayCount">Entries: 0</div>
</section>


<!-- Debug feed -->
<details>
  <summary>Debug (last 200 events)</summary>
  <pre id="debug"></pre>
</details>

<!-- Raw log & download -->
<button id="saveBtn">Save log as JSON</button>
<pre id="log" style="display:none"></pre>

<script src="panel.js"></script>
</body>
</html>
